{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Canvas.js","webpack:///./src/components/Control.js","webpack:///./src/components/Error.js","webpack:///./src/index.js","webpack:///./src/components/Storage.js","webpack:///./src/components/ImgLoader.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Canvas","constructor","this","canvasDraw","document","querySelector","draftCanvas","sizesWrap","gayscaleBtn","listeners","tool","color","line","startX","startY","imgSave","resizeImgSave","addEventListener","e","pencil","bucketTool","toDataURL","target","classList","contains","resize","dataset","size","ratio","pen","reDrawCanvas","grayscaleConvert","canvas","ctx","getContext","idataSrc","getImageData","width","height","idataTrg","createImageData","dataSrc","data","dataTrg","length","luma","clearCanvas","putImageData","tempCanvas","tempCtx","resizeImage","Image","src","reDraw","drawImage","newImg","imageSmoothingEnabled","param","img","image","canvasSize","startPointDrawWidth","startPointDrawHeight","getCoordinate","evt","moveX","pageX","offsetLeft","moveY","pageY","offsetTop","dotX","dotY","fillStyle","coord","fillRect","letDraw","bresenham","remove","removeEventListener","lineFat","dirX","dirY","lineX","Math","abs","lineY","pointX","pointY","dir","direction","trunc","breakLine","eraseCoord","eraserTool","dot","touchX","touchY","pixelDefault","join","slice","pixelStack","checkPixel","posX","posY","chekX","chekY","newPos","pop","x","y","reachRight","reachLeft","push","colorPicker","clearRect","onload","Control","canvasElem","controlPanel","tools","palette","bucket","currentColorElem","prevColorElem","clear","requestField","currentTool","currentColor","prevColor","isPickColor","chooseColor","logic","closest","markActiveTool","colorIndicator","switchColors","style","backgroundColor","keyToggleTools","code","preventDefault","activeTool","add","setActiveTool","setActiveColor","newColor","rgbColor","getComputedStyle","hexColor","convertBaseColor","canvasPixel","base","hexStr","split","forEach","k","val","num","toString","String","ErrorHandler","errorPosition","badAnswer","message","div","createElement","closeBtn","text","innerHTML","append","hidden","control","localStore","start","store","localStorage","getItem","storeObj","JSON","parse","putCanvas","canvasImg","restoreActiveTool","window","grabImg","stringify","setItem","error","requestURL","loadBtn","getData","url","request","response","fetch","ok","Error","json","imgPrepare","urls","small","crossOrigin"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export default class Canvas {\n  constructor() {\n    this.canvasDraw = document.querySelector('.display-canvas');\n    this.draftCanvas = document.querySelector('.draft-canvas');\n    this.sizesWrap = document.querySelector('.canvas-sizes');\n    this.gayscaleBtn = document.querySelector('.btn_grayscale');\n    this.listeners();\n    this.tool = null;\n    this.color = null;\n    this.line = 1;\n    this.startX = null;\n    this.startY = null;\n    this.imgSave = null;\n    this.resizeImgSave = null;\n  }\n\n  listeners() {\n    this.canvasDraw.addEventListener('mousedown', (e) => {\n      if (this.tool === 'pencil-tool') this.pencil(e);\n      if (this.tool === 'bucket-tool') this.bucketTool(e);\n    });\n\n    this.canvasDraw.addEventListener('mouseup', () => {\n      this.imgSave = this.canvasDraw.toDataURL();\n    });\n\n    this.sizesWrap.addEventListener('click', (e) => {\n      if (e.target.classList.contains('btn_size')) {\n        const resize = e.target.dataset.size;\n        const ratio = e.target.dataset.pen;\n        this.line = +ratio;\n        if (this.imgSave) this.reDrawCanvas(resize);\n      }\n    });\n\n    this.gayscaleBtn.addEventListener('click', () => {\n      if (this.imgSave) this.grayscaleConvert();\n    });\n  }\n\n  grayscaleConvert() {\n    const canvas = this.canvasDraw;\n    const ctx = canvas.getContext('2d');\n\n    const idataSrc = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const idataTrg = ctx.createImageData(canvas.width, canvas.height);\n    const dataSrc = idataSrc.data;\n    const dataTrg = idataTrg.data;\n\n    for (let i = 0; i < dataSrc.length; i += 4) {\n      const luma = dataSrc[i] * 0.2126 + dataSrc[i + 1] * 0.7152 + dataSrc[i + 2] * 0.0722;\n      dataTrg[i] = luma;\n      dataTrg[i + 1] = luma;\n      dataTrg[i + 2] = luma;\n      dataTrg[i + 3] = dataSrc[i + 3];\n    }\n    Canvas.clearCanvas();\n    ctx.putImageData(idataTrg, 0, 0);\n  }\n\n  reDrawCanvas(size) {\n    const ctx = this.canvasDraw.getContext('2d');\n\n    const tempCanvas = this.draftCanvas;\n    const tempCtx = tempCanvas.getContext('2d');\n\n    const resizeImage = new Image();\n    resizeImage.src = this.imgSave;\n\n    tempCanvas.width = size;\n    tempCanvas.height = size;\n\n    const reDraw = () => {\n      tempCtx.drawImage(resizeImage, 0, 0, size, size);\n      this.resizeImgSave = tempCanvas.toDataURL();\n\n      const newImg = new Image();\n      newImg.src = this.resizeImgSave;\n\n      const mainCanvas = () => {\n        Canvas.clearCanvas();\n        ctx.imageSmoothingEnabled = false;\n        ctx.drawImage(newImg, 0, 0, 512, 512);\n      };\n\n      newImg.addEventListener('load', () => {\n        mainCanvas();\n      });\n    };\n\n    resizeImage.addEventListener('load', () => {\n      reDraw();\n    });\n  }\n\n  drawImage(param, img) {\n    Canvas.clearCanvas();\n\n    const image = img;\n    const canvas = this.canvasDraw;\n    const ctx = canvas.getContext('2d');\n    const canvasSize = param;\n\n    if (image.width > canvas.width || image.height > canvas.height) {\n      const imgParam = (image.width > image.height) ? image.width : image.height;\n      const ratio = canvasSize / imgParam;\n      image.width *= ratio;\n      image.height *= ratio;\n    }\n\n    const startPointDrawWidth = (canvasSize - image.width) / 2;\n    const startPointDrawHeight = (canvasSize - image.height) / 2;\n    ctx.drawImage(image, startPointDrawWidth, startPointDrawHeight, image.width, image.height);\n    this.imgSave = this.canvasDraw.toDataURL();\n  }\n\n  getCoordinate(evt) {\n    const canvas = this.canvasDraw;\n\n    const moveX = evt.pageX - canvas.offsetLeft;\n    const moveY = evt.pageY - canvas.offsetTop;\n\n    const dotShiftX = moveX % this.line;\n    const dotShiftY = moveY % this.line;\n\n    const dotX = moveX - dotShiftX;\n    const dotY = moveY - dotShiftY;\n\n    return {\n      dotX,\n      dotY,\n    };\n  }\n\n  pencil(e) {\n    const canvas = this.canvasDraw;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = this.color;\n\n    const letDraw = (evt) => {\n      const coord = this.getCoordinate(evt);\n      this.startX = coord.dotX;\n      this.startY = coord.dotY;\n      ctx.fillRect(coord.dotX, coord.dotY, this.line, this.line);\n    };\n    letDraw(e);\n\n    const bresenham = this.bresenham.bind(this);\n\n    const remove = () => {\n      this.canvasDraw.removeEventListener('mousemove', bresenham);\n      document.removeEventListener('mouseup', remove);\n    };\n    this.canvasDraw.addEventListener('mousemove', bresenham);\n    document.addEventListener('mouseup', remove);\n  }\n\n  // Bresenham's line algorithm\n  bresenham(e) {\n    const ctx = this.canvasDraw.getContext('2d');\n    ctx.fillStyle = this.color;\n    const lineFat = this.line;\n    const coord = this.getCoordinate(e);\n\n    let dirX = coord.dotX - this.startX;\n    let dirY = coord.dotY - this.startY;\n    const lineX = Math.abs(dirX / lineFat);\n    const lineY = Math.abs(dirY / lineFat);\n\n    let pointX = this.startX;\n    let pointY = this.startY;\n\n    const dir = +lineFat;\n\n    dirX = (dirX > 0) ? dir : -dir;\n    dirY = (dirY > 0) ? dir : -dir;\n\n    let ratio = Math.abs(coord.dotY - this.startY) / Math.abs(coord.dotX - this.startX);\n    let direction = lineX;\n\n    if (lineX < lineY) {\n      direction = lineY;\n      ratio = Math.abs(coord.dotX - this.startX) / Math.abs(coord.dotY - this.startY);\n    }\n\n    const tempVal = Math.trunc(ratio);\n    ratio -= tempVal;\n\n    let breakLine = 0;\n\n    if (lineX >= lineY) {\n      for (let i = 0; i < direction; i += 1) {\n        breakLine += ratio;\n        pointX += dirX;\n\n        if (breakLine >= 0.5) {\n          pointY += dirY;\n          breakLine -= 1;\n        }\n\n        if (this.tool === 'eraser') {\n          const eraseCoord = {\n            pointX,\n            pointY,\n          };\n          this.eraserTool(eraseCoord);\n        } else {\n          ctx.fillRect(pointX, pointY, lineFat, lineFat);\n        }\n      }\n    } else {\n      for (let i = 0; i < direction; i += 1) {\n        breakLine += ratio;\n        pointY += dirY;\n\n        if (breakLine >= 0.5) {\n          pointX += dirX;\n          breakLine -= 1;\n        }\n\n        if (this.tool === 'eraser') {\n          const eraseCoord = {\n            pointX,\n            pointY,\n          };\n          this.eraserTool(eraseCoord);\n        } else {\n          ctx.fillRect(pointX, pointY, lineFat, lineFat);\n        }\n      }\n    }\n\n    this.startX = pointX;\n    this.startY = pointY;\n  }\n\n  bucketTool(e) {\n    const dot = this.line;\n    const canvas = this.canvasDraw;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = this.color;\n\n    let touchX = e.pageX - canvas.offsetLeft;\n    let touchY = e.pageY - canvas.offsetTop;\n\n    const pixelDefault = ctx.getImageData(touchX, touchY, 1, 1).data.join('');\n    const toCompareData = ctx.getImageData(touchX, touchY, 1, 1).data.join(', ');\n    const currentColor = this.color;\n    const toCompareColor = `${currentColor.slice(4, -1)}, 255`;\n    if (toCompareData === toCompareColor) return;\n\n    const shiftX = touchX % dot;\n    const shiftY = touchY % dot;\n    touchX -= shiftX;\n    touchY -= shiftY;\n    const pixelStack = [[touchX, touchY]];\n\n    const checkPixel = (posX, posY) => {\n      const chekX = posX;\n      const chekY = posY;\n      const nextPixel = ctx.getImageData(chekX, chekY, 1, 1).data.join('');\n      return nextPixel === pixelDefault;\n    };\n\n    const paintPixel = (posX, posY) => {\n      ctx.fillRect(posX, posY, dot, dot);\n    };\n\n    while (pixelStack.length) {\n      const newPos = pixelStack.pop();\n      const x = newPos[0];\n      let y = newPos[1];\n\n      // GO UP\n      do {\n        y -= dot;\n      } while (y >= 0 && checkPixel(x, y));\n      y += dot;\n\n      let reachRight = false;\n      let reachLeft = false;\n      do {\n        paintPixel(x, y);\n        //  LOOK to the RIGHT\n        if (x < canvas.width) {\n          if (checkPixel(x + dot, y)) {\n            if (!reachRight) {\n              pixelStack.push([x + dot, y]);\n              reachRight = true;\n            }\n          } else if (reachRight) {\n            reachRight = false;\n          }\n        }\n\n        //  LOOK to the LEFT\n        if (x > 0) {\n          if (checkPixel(x - dot, y)) {\n            if (!reachLeft) {\n              pixelStack.push([x - dot, y]);\n              reachLeft = true;\n            }\n          } else if (reachLeft) {\n            reachLeft = false;\n          }\n        }\n\n        y += dot;\n      } while ((checkPixel(x, y)) && (y !== canvas.height));\n    }\n  }\n\n  colorPicker(e) {\n    const dotX = e.pageX - this.canvasDraw.offsetLeft;\n    const dotY = e.pageY - this.canvasDraw.offsetTop;\n    const ctx = this.canvasDraw.getContext('2d');\n    const pixelData = ctx.getImageData(dotX, dotY, 1, 1).data;\n    return pixelData;\n  }\n\n  static clearCanvas() {\n    const canvas = document.querySelector('canvas');\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n\n  static grabImg() {\n    const canvas = document.querySelector('canvas');\n    const canvasImg = canvas.toDataURL();\n    return canvasImg;\n  }\n\n  static putCanvas(data) {\n    const canvas = document.querySelector('canvas');\n    const ctx = canvas.getContext('2d');\n\n    const image = new Image();\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0);\n    };\n    image.src = data;\n  }\n}\n","import Canvas from './Canvas';\n\nexport default class Control {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.canvasElem = document.querySelector('canvas');\n    this.controlPanel = document.querySelector('.control-panel-wrapper');\n    this.tools = document.querySelector('.tools-wrapper ul');\n    this.palette = document.querySelector('.palette-wrapper');\n    this.pencil = document.querySelector('.pencil-tool');\n    this.bucket = document.querySelector('.bucket-tool');\n    this.colorPicker = document.querySelector('.choose-tool');\n    this.currentColorElem = document.querySelector('.color-view_cur input');\n    this.prevColorElem = document.querySelector('.color-view_prev');\n    this.clear = document.querySelector('.btn_clear');\n    this.requestField = document.querySelector('.request-field');\n    this.currentTool = this.pencil;\n    this.currentColor = '#008800';\n    this.prevColor = '#ffbb00';\n    this.isPickColor = 0;\n    this.chooseColor();\n  }\n\n  logic() {\n    this.tools.addEventListener('click', (e) => {\n      if (e.target.closest('li')) {\n        this.markActiveTool(e.target);\n      }\n    });\n\n    this.palette.addEventListener('click', (e) => {\n      if (e.target.closest('li')) {\n        const targetBtn = e.target.closest('li');\n        const colorIndicator = targetBtn.querySelector('.color-view');\n        if (!colorIndicator.classList.contains('color-view_cur')) this.switchColors(colorIndicator);\n      }\n    });\n\n    this.palette.addEventListener('change', () => {\n      this.currentColor = this.currentColorElem.value;\n      // shortcut for convert hex to rgb )\n      this.currentColorElem.style.backgroundColor = this.currentColorElem.value;\n      this.canvas.color = this.currentColorElem.style.backgroundColor;\n    });\n\n    const keyToggleTools = (e) => {\n      if (e.code === 'KeyP') {\n        this.markActiveTool(this.pencil);\n      } else if (e.code === 'KeyC') {\n        this.markActiveTool(this.colorPicker);\n      } else if (e.code === 'KeyB') {\n        this.markActiveTool(this.bucket);\n      }\n    };\n\n    document.addEventListener('keydown', keyToggleTools);\n\n    this.requestField.addEventListener('focus', () => {\n      document.removeEventListener('keydown', keyToggleTools);\n    });\n\n    this.requestField.addEventListener('blur', () => {\n      document.addEventListener('keydown', keyToggleTools);\n    });\n\n    this.clear.addEventListener('click', Canvas.clearCanvas);\n\n    document.addEventListener('selectstart', (evt) => {\n      evt.preventDefault();\n    });\n  }\n\n  markActiveTool(tool) {\n    const activeTool = tool;\n    this.currentTool.classList.remove('active-tool');\n    activeTool.classList.add('active-tool');\n    this.currentTool = activeTool;\n    this.setActiveTool(activeTool);\n  }\n\n  setActiveTool(tool) {\n    const activeTool = tool.closest('li').classList[0];\n    this.canvas.tool = activeTool;\n\n    this.isPickColor = (activeTool === 'choose-tool') ? 1 : 0;\n  }\n\n  setActiveColor(newColor) {\n    this.currentColorElem.value = newColor;\n    this.prevColorElem.style.backgroundColor = this.prevColor;\n    this.currentColor = newColor;\n\n    // shortcut for convert hex to rgb )\n    this.currentColorElem.style.backgroundColor = newColor;\n    this.canvas.color = this.currentColorElem.style.backgroundColor;\n  }\n\n  switchColors(colorIndicator) {\n    const rgbColor = getComputedStyle(colorIndicator).backgroundColor;\n    const hexColor = Control.convertBaseColor(rgbColor);\n    this.currentColorElem.value = hexColor;\n    this.prevColorElem.style.backgroundColor = this.currentColor;\n    this.prevColor = this.currentColor;\n    this.currentColor = hexColor;\n\n    this.canvas.color = rgbColor;\n  }\n\n  chooseColor() {\n    this.canvasElem.addEventListener('click', (e) => {\n      if (this.isPickColor) {\n        const canvasPixel = this.canvas.colorPicker(e);\n        const hexColor = Control.convertBaseColor(canvasPixel);\n        this.prevColor = this.currentColor;\n        this.setActiveColor(hexColor);\n      }\n    });\n  }\n\n  static convertBaseColor(data) {\n    let base = data;\n    let hexStr = '';\n    if (typeof base === 'string') base = base.slice(4, -1).split(',');\n\n    base.forEach((k, i) => {\n      if (i === 3) return;\n      let val = k;\n      if (typeof val === 'string') val = +val;\n      let num = val.toString(16);\n      num = (num === '0') ? '00' : String(num);\n      hexStr += num;\n    });\n\n    hexStr = (hexStr === '000000') ? '#ffffff' : `#${hexStr}`;\n    return hexStr;\n  }\n}\n","export default class ErrorHandler {\n  constructor() {\n    this.errorPosition = document.querySelector('.loader-control');\n  }\n\n  badAnswer(message) {\n    const div = document.createElement('div');\n    const closeBtn = document.createElement('div');\n    const text = document.createElement('p');\n    div.classList.add('modal-error');\n    closeBtn.classList.add('modal-close-btn');\n\n    closeBtn.innerHTML = '&times;';\n    text.innerHTML = message;\n    div.append(closeBtn, text);\n    this.errorPosition.append(div);\n\n    closeBtn.addEventListener('click', () => {\n      div.hidden = true;\n    });\n  }\n}\n","import Canvas from './components/Canvas';\nimport Storage from './components/Storage';\nimport ImgLoader from './components/ImgLoader';\n// import CanvasSize from './components/CanvasSize';\nimport './scss/style.css';\n\nconst canvas = new Canvas();\n\nconst start = new Storage(canvas);\nstart.logic();\n\nconst imageApi = new ImgLoader(canvas);\nimageApi.logic();\n\n// const canvasControl = new CanvasSize();\n// canvasControl.logic();\n","import Control from './Control';\nimport Canvas from './Canvas';\n\nexport default class Storage {\n  constructor(canvas) {\n    this.control = new Control(canvas);\n    this.canvas = canvas;\n    this.localStore = {};\n  }\n\n  logic() {\n    const start = this.control;\n    const store = this.localStore;\n\n    if (localStorage.getItem('storePalette')) {\n      start.logic();\n\n      const storeObj = JSON.parse(localStorage.getItem('storePalette'));\n      Canvas.putCanvas(storeObj.canvasImg);\n\n      const restoreActiveTool = document.querySelector(`.${storeObj.activeTool}`);\n      start.markActiveTool(restoreActiveTool);\n\n      start.currentColor = storeObj.currentColor;\n      start.prevColor = storeObj.prevColor;\n      start.setActiveColor(start.currentColor);\n      this.canvas.line = storeObj.lineFat;\n      this.canvas.imgSave = storeObj.imgSave;\n    } else {\n      start.logic();\n\n      start.markActiveTool(start.currentTool);\n      start.setActiveColor(start.currentColor);\n    }\n\n    window.addEventListener('beforeunload', () => {\n      store.canvasImg = Canvas.grabImg();\n\n      const activeTool = start.currentTool.classList[0];\n      store.activeTool = activeTool;\n\n      store.currentColor = start.currentColor;\n      store.prevColor = start.prevColor;\n      store.lineFat = this.canvas.line;\n      store.imgSave = this.canvas.imgSave;\n\n      const storeObj = JSON.stringify(store);\n      localStorage.setItem('storePalette', storeObj);\n    });\n  }\n}\n","import ErrorHandler from './Error';\n\nexport default class ImgLoader {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.error = new ErrorHandler();\n    this.requestURL = 'https://api.unsplash.com/photos/random?client_id=76e02e7b52a90f9aeedee595901a91ad8a6e98072539f05ba2420e24b6a4fa75&query=town,';\n    this.loadBtn = document.querySelector('.btn_load');\n    this.requestField = document.querySelector('.request-field');\n  }\n\n  logic() {\n    this.loadBtn.addEventListener('click', () => {\n      this.getData();\n      this.canvas.line = 1;\n    });\n  }\n\n  async getData() {\n    let url = this.requestURL;\n    const request = this.requestField.value;\n\n    if (request) {\n      url = `${url}${request}`;\n\n      try {\n        const response = await fetch(url);\n        if (response.ok) {\n          const data = await response.json();\n          this.imgPrepare(data.urls.small);\n        } else {\n          throw new Error('Unfortunately we didn\\'t get correct answer from the server');\n        }\n      } catch (e) {\n        this.error.badAnswer(e.message);\n      }\n    }\n  }\n\n  imgPrepare(url) {\n    const image = new Image();\n    image.crossOrigin = 'Anonymous';\n    image.src = url;\n\n    const canvasSize = 512;\n    image.addEventListener('load', () => {\n      this.canvas.drawImage(canvasSize, image);\n    });\n  }\n}\n"],"sourceRoot":""}